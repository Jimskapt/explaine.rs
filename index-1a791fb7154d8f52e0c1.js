!function(e){function t(t){for(var o,r,l=t[0],a=t[1],i=0,s=[];i<l.length;i++)r=l[i],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&s.push(n[r][0]),n[r]=0;for(o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o]);for(c&&c(t);s.length;)s.shift()()}var o={},n={1:0};function r(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.e=function(e){var t=[],o=n[e];if(0!==o)if(o)t.push(o[2]);else{var l=new Promise((function(t,r){o=n[e]=[t,r]}));t.push(o[2]=l);var a,i=document.createElement("script");i.charset="utf-8",i.timeout=120,r.nc&&i.setAttribute("nonce",r.nc),i.src=function(e){return r.p+""+({}[e]||e)+"-"+{0:"034151694adf91cc34b3",3:"b4c99bb7ecb9a7c8ce61",4:"f930fbdd8b1b2ad47c2a"}[e]+".js"}(e);var c=new Error;a=function(t){i.onerror=i.onload=null,clearTimeout(s);var o=n[e];if(0!==o){if(o){var r=t&&("load"===t.type?"missing":t.type),l=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+r+": "+l+")",c.name="ChunkLoadError",c.type=r,c.request=l,o[1](c)}n[e]=void 0}};var s=setTimeout((function(){a({type:"timeout",target:i})}),12e4);i.onerror=i.onload=a,document.head.appendChild(i)}return Promise.all(t)},r.m=e,r.c=o,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r.oe=function(e){throw console.error(e),e};var l=this.webpackJsonp=this.webpackJsonp||[],a=l.push.bind(l);l.push=t,l=l.slice();for(var i=0;i<l.length;i++)t(l[i]);var c=a;r(r.s=2)}([function(e,t,o){e.exports=function(){return new Worker(o.p+"82e1afb3ef2438294bf5.worker.js")}},,function(e,t,o){"use strict";o.r(t);var n=o(0),r=o.n(n);const l=()=>{};const a=window.document,i=e=>a.querySelector(e);fetch("https://tzl3kczlk5.execute-api.us-east-1.amazonaws.com/default/explainer",{method:"POST"});const c="ontouchstart"in window;let s,u;D(a.body,c?"touch-device":"non-touch-device");let d=Promise.all([o.e(0).then(o.t.bind(null,3,7)),Promise.all([o.e(0),o.e(4)]).then(o.t.bind(null,4,7)),Promise.all([o.e(0),o.e(3)]).then(o.t.bind(null,5,7))]);d.then(([{default:e}])=>{s=e.fromTextArea(i(".codemirror-anchor"),{mode:"rust",lineNumbers:!0,theme:"solarized",readOnly:!!c&&"nocursor",indentUnit:4}),u=s.getWrapperElement(),D(a.body,"codemirror-rendered"),function(e,t){const o=()=>null!=e&&null!=t;e.on("change",ee(L,o,d)),t.addEventListener("mousemove",ee(S,o,d)),t.addEventListener("click",ee(E,o,d))}(s,u),function(e){const t=[...new window.URLSearchParams(location.search)].find(([e,t])=>"code"===e),o=null!=t?window.decodeURIComponent(t[1]):null;if(null!=o&&""!==o.trim())e.setValue(o);else{const t=window.localStorage.getItem("code");null!=t?e.setValue(t):a.addEventListener("load",()=>{e.setValue(i(".default-code").value)})}}(s)}).catch(e=>console.error(e));let p={compilation:{state:"pending"},editable:!1},m={lastRule:-1};const h=function(e,t){let o={},n=null;return r=>{const a="function"==typeof r?r({...t.get(),...o}):r;l("setState: ",a),Object.assign(o,a),null==n&&(n=window.requestAnimationFrame(()=>(()=>{const r=Object.assign({},t.get(),o),l=t.get();t.set(r),o={},n=null,e(l)})()))}}(e=>{const{compilation:t}=p,{compilation:o}=e;o.state!==t.state&&function(){const{state:e,error:t}=p.compilation;T.style.display="pending"===e?"initial":"none",C.style.display="pending"!==e?"initial":"none","error"===e?(Q(A,"Oops! ðŸ’¥"),Q(I,"There is a syntax error in your code:"),Z(U,"block"),K(V,t.msg),Z(X,t.isBlock?"block":"none"),m.errorMark=B(t,"compilation-error"),m.errorContextMark=B({start:{...t.start,ch:0},end:{...t.end,ch:s.getLine(t.end.line).length}},"compilation-error")):(m.errorMark&&m.errorMark.clear(),m.errorContextMark&&m.errorContextMark.clear(),Q(A,F),Q(I,Y),Z(U,"none"),Z(X,"none"))}(),o.explanation!==t.explanation&&function(){const e=p.compilation.explanation;if(m.hoverMark&&m.hoverMark.clear(),null==e||null!=m.computedMarks)return;m.hoverMark=B(e)}(),o.elaboration!==t.elaboration&&function(){const{elaboration:e}=p.compilation;m.mark&&m.mark.clear(),m.hoverMark&&m.hoverMark.clear(),null!=e?(m.mark=B(e.location),Q(A,e.title),Q(I,e.elaboration),Z($,"block"),Z(_,e.book?"block":"none"),Z(z,e.keyword?"block":"none"),H.href=e.book||"",W.href=e.keyword||"",Z(N,e.book||e.keyword?"none":"initial")):(Q(A,F),Q(I,Y),Z($,"none"))}(),o.hoverEl!==t.hoverEl&&function(){const{hoverEl:e}=p.compilation,t=e&&[...e.classList].find(e=>e.startsWith("computed-")),o=t&&Number(t.replace("computed-",""));null!=m.hoverIndex&&o!==m.hoverIndex&&G(u,`hover-${m.hoverIndex}`);null!=o&&D(u,`hover-${o}`);m.hoverIndex=o}(),o.address!==t.address&&function(){const{address:e}=p.compilation;e?(Z(w,"none"),G(b,"hidden"),b.href=e):(D(b,"hidden"),Z(w,null))}(),function(e){const{compilation:t}=e,{compilation:o}=p;if(o.state===t.state&&o.showAll===t.showAll&&o.exploration===t.exploration&&o.empty===t.empty)return;const n=null!=o.exploration;y.disabled=!n,(n||o.state==="error"||o.empty?D:G)(y,"show-all-loaded"),o.showAll?(D(u,"show-all-computed"),K(k,"Hide elements")):(G(u,"show-all-computed"),K(k,J))}(e),e.editable!==p.editable&&K(g,p.editable?"Disable editing":"Enable editing"),e.showModal!==p.showModal&&function(){const{showModal:e}=p;e?(D(v,"show-modal"),D(x,"show-modal")):(G(v,"show-modal"),G(x,"show-modal"))}()},{get:()=>p,set(e){p=e}});let f;{const e=new r.a;let t,o=!1,n=new Promise(e=>{t=e});e.onerror=e=>console.error(e),e.onmessage=e=>{const{data:o}=e;switch(l("Window received",o.type),o.type){case"ready":t(),P();break;case"compiled":h({compilation:{state:"success"}});break;case"compilation-error":h({compilation:{state:"error",error:o.error}});break;case"explanation":h(({compilation:e})=>({compilation:{...e,explanation:o.location}})),function(){if(m.computing=!1,m.next){const{clientX:e,clientY:t}=m.next;m.next=null,O(e,t)}}();break;case"elaboration":h(({compilation:e})=>({compilation:{...e,elaboration:null!=o.location?o:null}}));break;case"exploration":!function(e){m.computedMarks=e.map(({start:e,end:t},o)=>B({start:e,end:t},`computed-${o}`));for(let t=m.lastRule+1;t<e.length;t++)M.insertRule(`.hover-${t} .computed-${t} { background: #eee8d5 }`,M.cssRules.length);m.lastRule=Math.max(e.length,m.lastRule),m.hoverMark&&m.hoverMark.clear()}(o.exploration),h(({compilation:e})=>({compilation:{...e,exploration:!0}}));break;default:console.error("Unexpected message in window",o)}},f=ee(t=>e.postMessage(t),()=>o,n)}const w=i(".generate"),b=i(".link"),g=i(".toggle-edit"),y=i(".show-all"),k=i(".show-all-text"),v=(i(".show-all > .spinner"),i(".modal")),x=i(".overlay");w.addEventListener("click",()=>{let e=new window.URL(window.location.href),t=new window.URLSearchParams;t.append("code",s.getValue()),e.search=`?${t.toString()}`,h(({compilation:t})=>({compilation:{...t,address:e.toString()}}))}),g.addEventListener("click",()=>{const e=!p.editable;h({editable:e}),s.setOption("readOnly",!e&&"nocursor")}),y.addEventListener("click",()=>{h(({compilation:e})=>({compilation:{...e,showAll:!e.showAll}}))}),i(".whats-this").addEventListener("click",()=>{h({showModal:!p.showModal})}),x.addEventListener("click",()=>{h({showModal:!1})}),i(".close-modal").addEventListener("click",()=>{h({showModal:!1})});const M=(()=>{const e=a.createElement("style");return a.head.appendChild(e),e.sheet})();function L(){h({compilation:{state:"pending"}}),P()}function S(e){if(m.computedMarks)return void h(({compilation:t})=>({compilation:{...t,hoverEl:e.target}}));const{compilation:t}=p,{clientX:o,clientY:n}=e;"success"!==t.state||m.computing?m.next={clientX:o,clientY:n}:(m.computing=!0,O(o,n))}function E(){!function(e){if("success"!==p.compilation.state||p.compilation.empty)return;f({type:"elaborate",location:e})}(s.getCursor("from"))}function O(e,t){const{compilation:o}=p;if("success"!==o.state)return;let{line:n,ch:r}=s.coordsChar({left:e,top:t},"window");const l=m.lastLocation||{};n!==l.line||r!==l.ch?(m.lastLocation={line:n,ch:r},f({type:"explain",location:{line:n,ch:r}})):m.computing=!1}const q=function(e,t){let o=null,n=null;const r=()=>e(n);return e=>{n=e,null!=o&&window.clearTimeout(o),o=setTimeout(r,t)}}(e=>f({type:"compile",source:e}),128);function P(){const e=s.getValue();window.localStorage.setItem("code",e),""===e.trim()?h({compilation:{state:"success",empty:!0}}):q(s.getValue());const{computedMarks:t}=m;m.computedMarks=null,t&&requestAnimationFrame(()=>t.forEach(e=>e.clear()))}const j=i(".explanation"),T=j.querySelector(".loading"),C=j.querySelector(".loaded"),R=j.querySelector(".item-container"),A=R.querySelector(".item-title"),I=R.querySelector(".item"),U=R.querySelector(".error-message-container"),V=R.querySelector(".error-message"),$=j.querySelector(".more-info"),_=$.querySelector(".book-row"),H=_.querySelector("a"),z=$.querySelector(".keyword-row"),W=z.querySelector("a"),N=i(".info-wip"),X=i(".can-be-block"),Y=I.innerHTML,F=A.innerHTML,J=k.textContent;function B(e,t="highlighted"){return s.markText(e.start,e.end,{className:t})}function D(e,t){e.classList.add(t)}function G(e,t){e.classList.remove(t)}function K(e,t){e.textContent=t}function Q(e,t){e.innerHTML=t}function Z(e,t){e.style.display=t}function ee(e,t,o){let n;return(...r)=>{t()?e(...r):(n=r,o.then(()=>e(...n)))}}i(".wrap-in-block").addEventListener("click",()=>{const e=s.lineCount();for(let t=0;t<e;t++)s.indentLine(t,"add");s.replaceRange("fn main() {\n",{line:0,ch:0}),s.replaceRange("\n}",{line:e,ch:s.getLineHandle(e).text.length})})}]);