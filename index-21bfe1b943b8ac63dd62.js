!function(e){function n(n){for(var t,r,l=n[0],i=n[1],a=0,s=[];a<l.length;a++)r=l[a],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&s.push(o[r][0]),o[r]=0;for(t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=i[t]);for(c&&c(n);s.length;)s.shift()()}var t={},o={1:0};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.e=function(e){var n=[],t=o[e];if(0!==t)if(t)n.push(t[2]);else{var l=new Promise((function(n,r){t=o[e]=[n,r]}));n.push(t[2]=l);var i,a=document.createElement("script");a.charset="utf-8",a.timeout=120,r.nc&&a.setAttribute("nonce",r.nc),a.src=function(e){return r.p+""+({}[e]||e)+"-"+{0:"034151694adf91cc34b3",3:"b4c99bb7ecb9a7c8ce61",4:"f930fbdd8b1b2ad47c2a"}[e]+".js"}(e);var c=new Error;i=function(n){a.onerror=a.onload=null,clearTimeout(s);var t=o[e];if(0!==t){if(t){var r=n&&("load"===n.type?"missing":n.type),l=n&&n.target&&n.target.src;c.message="Loading chunk "+e+" failed.\n("+r+": "+l+")",c.name="ChunkLoadError",c.type=r,c.request=l,t[1](c)}o[e]=void 0}};var s=setTimeout((function(){i({type:"timeout",target:a})}),12e4);a.onerror=a.onload=i,document.head.appendChild(a)}return Promise.all(n)},r.m=e,r.c=t,r.d=function(e,n,t){r.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,n){if(1&n&&(e=r(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)r.d(t,o,function(n){return e[n]}.bind(null,o));return t},r.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(n,"a",n),n},r.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},r.p="",r.oe=function(e){throw console.error(e),e};var l=this.webpackJsonp=this.webpackJsonp||[],i=l.push.bind(l);l.push=n,l=l.slice();for(var a=0;a<l.length;a++)n(l[a]);var c=i;r(r.s=2)}([function(e,n,t){e.exports=function(){return new Worker(t.p+"9b883153ce576ae59b03.worker.js")}},,function(e,n,t){"use strict";t.r(n);const o=()=>{},r=()=>fetch(__ANALYTICS_URL__,{method:"POST"}),l=e=>fetch(__ANALYTICS_URL__,{method:"POST",body:JSON.stringify(e)});function i(e,n){let t={},r=null;return l=>{const i="function"==typeof l?l({...n.get(),...t}):l;o("setState: ",i),Object.assign(t,i),null==r&&(r=window.requestAnimationFrame(()=>(()=>{const o=Object.assign({},n.get(),t),l=n.get();n.set(o),t={},r=null,e(l)})()))}}function a(e){let n={_sentinel:{}};return t=>{const o=Object.keys({...n,...t}).some(e=>n[e]!==t[e]);n=t,o&&e(t)}}function c(e,n){e.classList.add(n)}function s(e,n){e.classList.remove(n)}function u(e,n){e.textContent=n}function d(e,n){e.innerHTML=n}function m(e,n){e.style.display=n}self.addEventListener("error",e=>{l({line:e&&e.lineno,column:e&&e.colno,message:e&&e.message,filename:e&&e.filename,stack:e&&e.error&&e.error.stack,raw:e})});var p=t(0),h=t.n(p);const f=e=>document.querySelector(e);const g=e=>document.querySelector(e);const b=({onNavigate:e,onOutsideClick:n})=>{const t=g(".missing-tooltip"),o=t.querySelector("code"),r=t.querySelector(".submit-issue");let l={missing:null};const a=i(()=>{!function({missing:e}){var n;(null!=e?c:s)(t,"visible"),u(o,null!==(n=null==e?void 0:e.code)&&void 0!==n?n:"")}({missing:l.missing})},{get:()=>l,set(e){l=e}});return r.addEventListener("click",n=>{n.preventDefault();const{code:t,location:o}=l.missing||{};if(!t||!o)return;let r=new URLSearchParams;r.append("labels","missing-hint"),r.append("title","Missing Hint"),r.append("body",["### What I expected","\x3c!-- What hint should we show here? What part of this syntax don't you understand? --\x3e","","### Source code","```",t,"```","",`Location: line ${o.line}, column ${o.ch}`].join("\n"));let i=new URL("https://github.com/jrvidal/explaine.rs/issues/new");i.search=r.toString(),window.open(i.toString(),"_blank"),e()}),window.addEventListener("click",e=>{if(null==l.missing)return;let o=e.target;do{if(o==t)return;o=o.parentElement}while(null!=o);n()}),a};function w(){const e=g(".explanation"),n=e.querySelector(".loading"),t=e.querySelector(".loaded"),o=e.querySelector(".item-container"),r=o.querySelector(".item-title"),l=o.querySelector(".item"),a=o.querySelector(".error-message-container"),p=o.querySelector(".error-message"),h=e.querySelector(".file-bug"),f=e.querySelector(".do-file-bug"),w=l.innerHTML,k=r.innerHTML;let v={issueVisible:!1,error:null,compilationState:0,elaboration:null,missing:null};let y=null!=localStorage.getItem("settings.reportDialog");const S=i(()=>{!function({error:e,compilationState:o,elaboration:i,missing:g}){m(n,0===o?"initial":"none"),m(t,0!==o?"initial":"none");const b=1===o&&null!=g;m(h,b?"block":"none"),(b&&!y?c:s)(f,"shake"),2===o?(d(r,"Oops! ðŸ’¥"),d(l,"There is a syntax error in your code:"),m(a,"block"),u(p,e.msg)):null!=i?(d(r,i.title),d(l,i.elaboration),m(a,"none")):(d(r,k),d(l,w),m(a,"none"),x({missing:v.issueVisible?v.missing:null}))}(v)},{get:()=>v,set(e){v=e}}),x=b({onNavigate(){S({issueVisible:!1})},onOutsideClick(){S({issueVisible:!1})}});return f.addEventListener("click",e=>{e.preventDefault(),localStorage.setItem("settings.reportDialog","true"),y=!0,S({issueVisible:!v.issueVisible})}),e=>S(e)}let k=Promise.all([t.e(0).then(t.t.bind(null,3,7)),Promise.all([t.e(0),t.e(4)]).then(t.t.bind(null,4,7)),Promise.all([t.e(0),t.e(3)]).then(t.t.bind(null,5,7))]);const v=window.document,y=e=>v.querySelector(e);r();const S="ontouchstart"in window;let x,M;c(v.body,S?"touch-device":"non-touch-device"),function({anchor:e,isTouchDevice:n,onChange:t,onMouseMove:o,onClick:r}){let i=k.then(([{default:l}])=>{const i=l.fromTextArea(e,{mode:"rust",lineNumbers:!0,theme:"solarized",readOnly:!!n&&"nocursor",indentUnit:4}),a=i.getWrapperElement();return i.on("change",e=>t(i,e)),a.addEventListener("mousemove",e=>o(i,e)),a.addEventListener("click",e=>r(i,e)),{cm:i,codemirrorEl:a}});return i.catch(e=>l({message:e&&e.message,error:e})),i}({isTouchDevice:S,anchor:y(".codemirror-anchor"),onClick(){!function(e){1!==C.compilation.state||C.empty||(T.elaborationIndex=T.compilationIndex,T.lastElaborationRequest=e,A({type:"elaborate",location:e}))}(x.getCursor("from"))},onMouseMove(e,n){!function(e){if(1!==C.compilation.state)return;if(T.computedMarks)return void R(({compilation:n})=>({compilation:{...n,hoverEl:e.target}}));V(e)}(n)},onChange(){T.compilationIndex+=1,R({compilation:O,address:null,empty:""===x.getValue()}),j()}}).then(({cm:e,codemirrorEl:n})=>(x=e,M=n,function(e){let n=Promise.resolve();const t=[...new window.URLSearchParams(location.search)].find(([e,n])=>"code"===e),o=null!=t?window.decodeURIComponent(t[1]):null;if(null!=o&&""!==o.trim())return e.setValue(o),n;const r=window.localStorage.getItem("code");if(null!=r&&""!==r.trim())return e.setValue(r),n;return n="loading"===v.readyState?new Promise(e=>{v.addEventListener("DOMContentLoaded",()=>e())}):Promise.resolve(),n=n.then(()=>e.setValue(y(".default-code").value)),n}(x))).then(()=>{c(v.body,"codemirror-rendered"),R({editorReady:!0})});const E=function({onAddress:e,getValue:n}){const t=f(".generate"),o=f(".link");return t.addEventListener("click",()=>{if(null==n())return;let t=new window.URL(window.location.href),o=new window.URLSearchParams;const r=n();null!=r&&(o.append("code",r),t.search=`?${o.toString()}`,e(t.toString()))}),a((function({address:e,enabled:n}){t.disabled=!n,e?(m(t,"none"),s(o,"hidden"),o.href=e):(m(t,"initial"),c(o,"hidden"))}))}({onAddress(e){R({address:e})},getValue:()=>x&&x.getValue()});!function(){const e=f(".modal"),n=f(".overlay");let t={showModal:!1};const o=i(o=>{t.showModal?(c(e,"show-modal"),c(n,"show-modal")):(s(e,"show-modal"),s(n,"show-modal"))},{get:()=>t,set(e){t=e}});f(".whats-this").addEventListener("click",()=>{o(({showModal:e})=>({showModal:!e}))}),n.addEventListener("click",()=>{o({showModal:!1})}),f(".close-modal").addEventListener("click",()=>{o({showModal:!1})})}();const L=function({onToggleEdit:e}){const n=f(".toggle-edit");return n.addEventListener("click",()=>{e()}),a(({enabled:e,editable:t})=>{n.disabled=!e,u(n,t?"Disable editing":"Enable editing")})}({onToggleEdit(){R(({editable:e})=>({editable:!e}))}}),I=function({onToggleShowAll:e}){const n=f(".show-all"),t=f(".show-all-text"),o=t.textContent;return n.addEventListener("click",()=>{e()}),a((function({showAll:e,empty:r,canShow:l,failedCompilation:i}){n.disabled=!l,(l||i||r?c:s)(n,"show-all-loaded"),u(t,e?"Hide elements":o)}))}({onToggleShowAll(){R(({compilation:e})=>({compilation:{...e,showAll:!e.showAll}}))}}),q=function({onWrapInBlock:e}){const n=g(".explanation").querySelector(".more-info"),t=n.querySelector(".book-row"),o=t.querySelector("a"),r=n.querySelector(".keyword-row"),l=r.querySelector("a"),i=g(".info-wip"),c=function({onWrapInBlock:e}){const n=g(".can-be-block");return g(".wrap-in-block").addEventListener("click",()=>{e()}),({canBeBlock:e})=>{m(n,e?"block":"none")}}({onWrapInBlock:e}),s=w(),u=a(c),d=a((function({elaboration:e}){null!=e?(m(n,"block"),m(t,e.book?"block":"none"),m(r,e.keyword?"block":"none"),o.href=e.book||"",l.href=e.keyword||"",m(i,e.book||e.keyword?"none":"initial")):m(n,"none")})),p=a(s);return({elaboration:e,error:n,compilationState:t,missing:o})=>{u({canBeBlock:Boolean(n&&n.isBlock)}),d({elaboration:e}),p({error:n,compilationState:t,elaboration:e,missing:o})}}({onWrapInBlock(){if(null==x)return;const e=x.lineCount();for(let n=0;n<e;n++)x.indentLine(n,"add");x.replaceRange("fn main() {\n",{line:0,ch:0}),x.replaceRange("\n}",{line:e,ch:x.getLineHandle(e).text.length})}});let C={compilation:{state:0,showAll:!1,hoverEl:null,explanation:null,elaboration:null,exploration:!1,error:null,missing:null},editable:!S,address:null,editorReady:!1,empty:!1};const O=C.compilation;let T={lastRule:-1,mark:null,hoverMark:null,computedMarks:null,errorMark:null,errorContextMark:null,hoverIndex:null,compilationIndex:0,elaborationIndex:null,lastElaborationRequest:null};const R=i(()=>{const{compilation:e}=C;U({hoverEl:e.hoverEl}),D({error:e.error}),H({elaboration:e.elaboration}),Y({explanation:e.explanation}),F({showAll:e.showAll,editable:C.editable}),q({elaboration:e.elaboration,error:e.error,compilationState:e.state,missing:e.missing}),E({address:C.address,enabled:C.editorReady}),L({editable:C.editable,enabled:C.editorReady}),I({showAll:e.showAll,empty:C.empty,canShow:null!=e.exploration,failedCompilation:2===e.state})},{get:()=>C,set(e){C=e}});let{postMessage:A,ready:P}=function({onMessage:e}){const n=new h.a;let t,r=new Promise(e=>{t=e});return n.onerror=e=>l(e),n.onmessageerror=e=>l({message:"onmessageerror",error:e}),n.onmessage=n=>{const{data:r}=n;o("Window received",r.type,r),"ready"!==r.type?e(r):t()},{postMessage:e=>n.postMessage(e),ready:r}}({onMessage(e){switch(e.type){case"compiled":R({compilation:{...O,state:1}});break;case"compilation-error":R({compilation:{...O,state:2,error:e.error}});break;case"explanation":R(({compilation:n})=>({compilation:{...n,explanation:e.location}})),function(){if(T.computedMarks)return;$()}();break;case"elaboration":!function(e){if(T.compilationIndex!==T.elaborationIndex)return;let n=null;if(null==e.location){const e=5,{line:t,ch:o}=T.lastElaborationRequest,r=Math.max(0,t-e),l=Math.min(x.lineCount()-1,t+e);let i=[...new Array(l-r)].map((e,n)=>x.getLine(r+n));const a=/^ *$/,c=i.filter(e=>!a.test(e)).reduce((e,n)=>{var t,o;return Math.min(e,null!==(o=null===(t=n.match(/^ */))||void 0===t?void 0:t[0].length)&&void 0!==o?o:0)},Number.POSITIVE_INFINITY);if(c>0){const e=new RegExp("^"+" ".repeat(c));i.forEach((n,t)=>{a.test(n)||(i[t]=n.replace(e,""))})}i.forEach((e,n)=>{i[n]=`${String(n).padStart(2," ")} | ${e}`}),i.splice(t-r+1,0,`   | ${" ".repeat(o-c)}â†‘`),n={code:i.join("\n"),location:{line:t-r,ch:o-c}}}R(({compilation:t})=>({compilation:{...t,elaboration:null!=e.location?e:null,missing:n}}))}(e);break;case"exploration":!function(e){T.computedMarks=e.map(({start:e,end:n},t)=>J({start:e,end:n},`computed-${t}`));for(let n=T.lastRule+1;n<e.length;n++)_.insertRule(`.hover-${n} .computed-${n} { background: #eee8d5 }`,_.cssRules.length);T.lastRule=Math.max(e.length,T.lastRule),T.hoverMark&&T.hoverMark.clear()}(e.exploration),R(({compilation:e})=>({compilation:{...e,exploration:!0}}));break;default:console.error("Unexpected message in window",e)}}});const _=(()=>{const e=v.createElement("style");return v.head.appendChild(e),e.sheet})();const j=(()=>{let e=!1;P.then(()=>{e=!0});let n=!1;return()=>{e?B():n||(n=!0,P.then(()=>B()))}})();const{debounced:V,done:$}=function(e,n){let t=!0;const o={};let r=o,l=!1;const i=()=>{r!==o?l||(l=!0,window.setTimeout(()=>{l=!1;const n=r;r=o,e(n,i)},n)):t=!0};return{done:i,debounced(n){t?(t=!1,e(n,i)):r=n}}}((function({clientX:e,clientY:n},t){const{compilation:o}=C;if(1!==o.state)return t();let{line:r,ch:l}=x.coordsChar({left:e,top:n},"window");N({line:r,ch:l}),N.cached&&t()}),200),N=function(e,n){let t={},o=r=>{n(t,r)?(t=r,o.cached=!0):(t=r,o.cached=!1,e(r))};return o}((function({line:e,ch:n}){A({type:"explain",location:{line:e,ch:n}})}),(e,n)=>{if(e.line===n.line&&e.ch===n.ch)return!0;const{explanation:t}=C.compilation;return null!=t&&function({line:e,ch:n},t,o){return(t.line<e||t.line===e&&t.ch<=n)&&(e<o.line||e===o.line&&n<=o.ch)}(n,t.start,t.end)});const W=function(e,n){let t=null,o=null;const r=()=>e(o);return e=>{o=e,null!=t&&window.clearTimeout(t),t=window.setTimeout(r,n)}}(e=>A({type:"compile",source:e}),128);function B(){const e=x.getValue();window.localStorage.setItem("code",e),""===e.trim()?R({compilation:{...O,state:1}}):W(x.getValue());const{computedMarks:n}=T;T.computedMarks=null,n&&requestAnimationFrame(()=>n.forEach(e=>e.clear()))}const U=a((function({hoverEl:e}){const n=e&&[...e.classList].find(e=>e.startsWith("computed-")),t=null!=n?Number(n.replace("computed-","")):null;null!=T.hoverIndex&&t!==T.hoverIndex&&s(M,`hover-${T.hoverIndex}`),null!=t&&c(M,`hover-${t}`),T.hoverIndex=t})),D=a((function({error:e}){T.errorMark&&T.errorMark.clear(),T.errorContextMark&&T.errorContextMark.clear(),null!=e&&(T.errorMark=J(e,"compilation-error"),T.errorContextMark=J({start:{...e.start,ch:0},end:{...e.end,ch:x.getLine(e.end.line).length}},"compilation-error"))})),H=a((function({elaboration:e}){T.mark&&T.mark.clear(),null!=e&&(T.mark=J(e.location))})),Y=a((function({explanation:e}){T.hoverMark&&T.hoverMark.clear(),null!=e&&null==T.computedMarks&&(T.hoverMark=J(e))})),F=a((function({showAll:e,editable:n}){x.setOption("readOnly",!n&&"nocursor"),e?c(M,"show-all-computed"):s(M,"show-all-computed")}));function J(e,n="highlighted"){return x.markText(e.start,e.end,{className:n})}}]);